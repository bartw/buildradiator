define("app",["exports"],function(t){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.App=function(){function t(){e(this,t)}return t.prototype.configureRouter=function(t,e){this.router=e,t.title="Teamcity radiator",t.map([{route:"failed/:baseUrl",name:"Faled Build Overview",moduleId:"failed-build-overview"},{route:"running/:baseUrl",name:"Running Build Overview",moduleId:"running-build-overview"}])},t}()}),define("environment",["exports"],function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}}),define("failed-build-overview",["exports","services/build-factory","aurelia-framework"],function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.FailedBuildOverview=void 0;var u,s;t.FailedBuildOverview=(u=(0,n.inject)(e.BuildFactory),u(s=function(){function t(e){i(this,t),this.factory=e}return t.prototype.activate=function(t){function e(t){var e=this;this.factory.constructFailedBuildObjects(t.baseUrl).then(function(t){e.builds=t})}e.bind(this)(t),setInterval(e.bind(this),3e4,t)},t}())||s)}),define("main",["exports","./environment"],function(t,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){t.use.standardConfiguration().feature("resources"),u.default.debug&&t.use.developmentLogging(),u.default.testing&&t.use.plugin("aurelia-testing"),t.start().then(function(){return t.setRoot()})}Object.defineProperty(t,"__esModule",{value:!0}),t.configure=i;var u=n(e);Promise.config({warnings:{wForgottenReturn:!1}})}),define("running-build-overview",["exports","services/build-service","aurelia-framework"],function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.RunningBuildOverview=void 0;var u,s;t.RunningBuildOverview=(u=(0,n.inject)(e.BuildService),u(s=function(){function t(e){i(this,t),this.buildService=e}return t.prototype.activate=function(t){function e(t){var e=this;this.buildService.getAllLatestRunningBuilds(t.baseUrl).then(function(t){e.builds=t})}e.bind(this)(t),setInterval(e.bind(this),3e4,t)},t}())||s)}),define("resources/index",["exports"],function(t){"use strict";function e(t){}Object.defineProperty(t,"__esModule",{value:!0}),t.configure=e}),define("services/build-factory",["exports","./build-service","aurelia-framework"],function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.BuildFactory=void 0;var u,s;t.BuildFactory=(u=(0,n.inject)(e.BuildService),u(s=function(){function t(e){i(this,t),this.buildService=e}return t.prototype.constructFailedBuildObjects=function(t){return Promise.all([this.buildService.getAllFailedBuilds(t),this.buildService.getAllLatestRunningBuilds(t)]).then(function(t){function e(){if(i(u))throw new Error("There are failed builds with the same name. We didn't foresee this to happen. Sorry. Please contact us")}function n(){if(i(s))throw new Error("There are running builds with the same name. We didn't foresee this to happen. Sorry. Please contact us")}function i(t){return t.map(function(e){return t.filter(function(t){return e.name===t.name}).length}).filter(function(t){return t>1}).length>1}var u=t[0],s=t[1];return e(),n(),u.map(function(t){function e(){function e(){return s.filter(function(e){return e.name===t.name})[0]}return void 0!==e()&&e().buildNumber>t.buildNumber}return t.newBuildRunning=e(),t})})},t}())||s)}),define("services/build-service",["exports","./http-client-router","aurelia-framework"],function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){var n={method:"GET",headers:new Headers({Accept:"application/json","X-Requested-With":"Fetch"})};return t.fetch(e,n).then(function(t){return t.json()}).then(function(t){return t.buildType.filter(function(t){return t.builds.build.length>0}).map(function(t){return{name:t.name,buildNumber:t.builds.build[0].number,status:t.builds.build[0].status,statusText:t.builds.build[0].statusText}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.BuildService=void 0;var s,r;t.BuildService=(s=(0,n.inject)(e.HttpClientRouter),s(r=function(){function t(e){i(this,t),this.clientRouter=e}return t.prototype.getAllFailedBuilds=function(t){var e="http://"+t+"/guestAuth/app/rest/buildTypes?locator=affectedProject:(id:_Root)&fields=buildType(id,name,builds($locator(running:false,canceled:false,count:1),build(number,status,statusText)))";return u(this.clientRouter,e).then(function(t){return t.filter(function(t){return"FAILURE"===t.status})})},t.prototype.getAllLatestRunningBuilds=function(t){var e="http://"+t+"/guestAuth/app/rest/buildTypes?locator=affectedProject:(id:_Root)&fields=buildType(id,name,builds($locator(running:true,canceled:false,count:1),build(number,status,statusText)))";return u(this.clientRouter,e)},t}())||r)}),define("services/http-client-router",["exports","aurelia-fetch-client","./teamcitystub/team-city-http-client-stub","aurelia-framework"],function(t,e,n,i){"use strict";function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClientRouter=void 0;var s,r;t.HttpClientRouter=(s=(0,i.inject)(e.HttpClient,n.TeamCityHttpClientStub),s(r=function(){function t(e,n){u(this,t),this.realHttpClient=e,this.teamCityHttpClientStub=n}return t.prototype.fetch=function(t,e){return t.includes("stub")?this.teamCityHttpClientStub.fetch(t):this.realHttpClient.fetch(t,e)},t}())||r)}),define("services/teamcitystub/team-city-http-client-stub",["exports","./team-city-latest-builds-response","./team-city-latest-running-builds-response"],function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.TeamCityHttpClientStub=void 0;var s=i(e),r=i(n);t.TeamCityHttpClientStub=function(){function t(){u(this,t)}return t.prototype.fetch=function(t){if(t.includes("running:false"))return Promise.resolve({json:function(){return s.default}});if(t.includes("running:true"))return Promise.resolve({json:function(){return r.default}});throw new Error("team city http client stub doesn't support "+t)},t}()}),define("services/teamcitystub/team-city-latest-builds-response",["exports"],function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={buildType:[{name:"build 1",builds:{build:[{number:"3.1.70.17327",status:"FAILURE",statusText:"Tests passed: 198, ignored: 9"}]}},{name:"build 2",builds:{build:[{number:"3.1.6965.17318",status:"SUCCESS",statusText:"Tests passed: 2391, ignored: 6"}]}},{name:"build 3",builds:{build:[{number:"123",status:"SUCCESS",statusText:"Tests passed: 35"}]}},{name:"build 4",builds:{build:[{number:"3.1.54.17253",status:"SUCCESS",statusText:"Tests passed: 35"}]}},{name:"build 5",builds:{build:[{number:"3.1.54.17287",status:"FAILURE",statusText:"Tests failed: 4 (1 new), passed: 31"}]}},{name:"build 6",builds:{build:[{number:"1.2.54.17287",status:"FAILURE",statusText:"Tests failed: 2, passed: 33; snapshot dependency failed: Main :: Data Quality Tests :: build 6"}]}},{name:"build 7",builds:{build:[{number:"3.5.54.17287",status:"FAILURE",statusText:"Tests failed: 3, passed: 32; snapshot dependency failed: Main :: Data Quality Tests :: build 7"}]}},{name:"build 8",builds:{build:[{number:"3.5.87.17287",status:"SUCCESS",statusText:"Tests failed: 8 (1 new), passed: 27; snapshot dependency failed: Main :: Data Quality Tests :: build 8"}]}},{name:"build 9",builds:{build:[{number:"3.5.99.17287",status:"FAILURE",statusText:"Tests failed: 13, passed: 22; snapshot dependency failed: Main :: Data Quality Tests :: build 9"}]}},{name:"build 10",builds:{build:[{number:"3.5.99.21",status:"FAILURE",statusText:"Tests failed: 10, passed: 25"}]}}]}}),define("services/teamcitystub/team-city-latest-running-builds-response",["exports"],function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={buildType:[{name:"build 1",builds:{build:[{number:"3.1.70.17328",status:"SUCCESS",statusText:"Tests passed: 198, ignored: 9"}]}},{name:"build 25",builds:{build:[{number:"3.1.6965.17318",status:"SUCCESS",statusText:"Tests passed: 2391, ignored: 6"}]}},{name:"build 3",builds:{build:[{number:"120",status:"FAILURE",statusText:"Tests passed: 35"}]}},{name:"build 4",builds:{build:[{number:"3.1.54.17255",status:"FAILURE",statusText:"Tests passed: 35"}]}}]}}),define("text!app.html",["module"],function(t){t.exports='<template>\r\n  <require from="css/custom.css"></require>\r\n  <router-view></router-view>\r\n</template>'}),define("text!css/custom.css",["module"],function(t){t.exports="@keyframes fadeIn { \r\n  from { opacity: 0; } \r\n}\r\n\r\n.running {\r\n    animation: fadeIn 1s infinite alternate;\r\n}"}),define("text!failed-build-overview.html",["module"],function(t){t.exports='<template>\r\n\t<div class="container">\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-4 text-center" repeat.for="build of builds">\r\n\t\t\t\t<div class="alert alert-danger  ${build.newBuildRunning ? \'running\' : \'\'}" role="alert">\r\n\t\t\t\t\t<h1>${build.name}</h1>\r\n\t\t\t\t\t<p>${build.statusText}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>'}),define("text!running-build-overview.html",["module"],function(t){t.exports='<template>\r\n\t<div class="container">\r\n\t\t<div class="row">\r\n\t\t\t<div class="col-md-4 text-center" repeat.for="build of builds">\r\n\t\t\t\t<div class="running alert ${build.status === \'SUCCESS\' ? \'alert-success\' : \'alert-danger\'}" role="alert">\r\n\t\t\t\t\t<h1>${build.name}</h1>\r\n\t\t\t\t\t<p>${build.statusText}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>'});