{"version":3,"sources":["src/app.js","src/environment.js","src/main.js","src/resources/index.js","src/services/build-service.js","src/services/http-client-router.js","src/services/teamcitystub/team-city-builds-response.js","src/services/teamcitystub/team-city-http-client-stub.js","C:/Users/robs/Documents/OefProjects/teamcity-radiator/src/app.html"],"names":["setAllBuilds","app","service","getAllFailedBuilds","then","builds","App","debug","testing","configure","Promise","config","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","setRoot","BuildService","clientRouter","baseUrl","url","init","method","headers","Headers","fetch","response","json","jsonResponse","buildType","filter","buildTypeElement","build","length","map","name","status","statusText","HttpClientRouter","realHttpClient","teamCityHttpClientStub","includes","TeamCityHttpClientStub","resolve"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {BuildService} from 'services/build-service';\r\nimport {inject} from 'aurelia-framework';\r\n\r\nfunction setAllBuilds(app, service) {\r\n  service\r\n  .getAllFailedBuilds('stub')\r\n  .then(builds => {app.builds = builds;} ) \r\n}\r\n\r\n@inject(BuildService)\r\nexport class App {\r\n  constructor(service) {\r\n    setAllBuilds(this, service);\r\n  }\r\n}\r\n","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import { HttpClientRouter } from './http-client-router';\r\nimport { inject } from 'aurelia-framework';\r\n\r\n@inject(HttpClientRouter)\r\nexport class BuildService {\r\n  constructor(clientRouter) {\r\n    this.clientRouter = clientRouter;\r\n  }\r\n\r\n  getAllFailedBuilds(baseUrl) {\r\n    let url = baseUrl + '/guestAuth/app/rest/buildTypes?locator=affectedProject:(id:_Root)&fields=buildType(id,name,builds($locator(running:false,canceled:false,count:1),build(number,status,statusText)))';\r\n\r\n    let init = {\r\n      method: 'GET',\r\n      headers: new Headers({\r\n        'Accept': 'application/json',\r\n        'X-Requested-With': 'Fetch',\r\n      })\r\n    };\r\n\r\n    return this.clientRouter.fetch(url, init)\r\n      .then(response => response.json())\r\n      .then(jsonResponse =>\r\n        jsonResponse.buildType\r\n          .filter(buildTypeElement => buildTypeElement.builds.build.length > 0)\r\n          .map(buildTypeElement => {\r\n            return {\r\n              \"name\": buildTypeElement.name,\r\n              \"status\": buildTypeElement.builds.build[0].status,\r\n              \"statusText\": buildTypeElement.builds.build[0].statusText\r\n            }\r\n          })\r\n          .filter(build => build.status === 'FAILURE'));\r\n  }\r\n}\r\n","import { HttpClient } from 'aurelia-fetch-client';\r\nimport { TeamCityHttpClientStub } from './teamcitystub/team-city-http-client-stub';\r\nimport { inject } from 'aurelia-framework';\r\n\r\n@inject(HttpClient, TeamCityHttpClientStub)\r\nexport class HttpClientRouter {\r\n    constructor(realHttpClient, teamCityHttpClientStub) {\r\n        this.realHttpClient = realHttpClient;\r\n        this.teamCityHttpClientStub = teamCityHttpClientStub;\r\n    }\r\n\r\n    fetch(url, init) {\r\n        return url.includes('stub') ? this.teamCityHttpClientStub.fetch() : this.realHttpClient.fetch(url, init);\r\n    }\r\n}\r\n","export default {\r\n  \"buildType\": [\r\n    {\r\n      \"name\": \"build 1\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"status\": \"SUCCESS\",\r\n            \"statusText\": \"Tests passed: 198, ignored: 9\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"name\": \"build 2\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"status\": \"SUCCESS\",\r\n            \"statusText\": \"Tests passed: 2391, ignored: 6\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"name\": \"build 3\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"status\": \"SUCCESS\",\r\n            \"statusText\": \"Tests passed: 35\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"name\": \"build 4\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"status\": \"SUCCESS\",\r\n            \"statusText\": \"Tests passed: 35\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"name\": \"build 5\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"status\": \"FAILURE\",\r\n            \"statusText\": \"Tests failed: 4 (1 new), passed: 31\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"name\": \"build 6\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"status\": \"FAILURE\",\r\n            \"statusText\": \"Tests failed: 2, passed: 33; snapshot dependency failed: Main :: Data Quality Tests :: build 6\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"name\": \"build 7\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"status\": \"FAILURE\",\r\n            \"statusText\": \"Tests failed: 3, passed: 32; snapshot dependency failed: Main :: Data Quality Tests :: build 7\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"name\": \"build 8\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"status\": \"FAILURE\",\r\n            \"statusText\": \"Tests failed: 8 (1 new), passed: 27; snapshot dependency failed: Main :: Data Quality Tests :: build 8\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"name\": \"build 9\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"status\": \"FAILURE\",\r\n            \"statusText\": \"Tests failed: 13, passed: 22; snapshot dependency failed: Main :: Data Quality Tests :: build 9\"\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    {\r\n      \"name\": \"build 10\",\r\n      \"builds\": {\r\n        \"build\": [\r\n          {\r\n            \"status\": \"FAILURE\",\r\n            \"statusText\": \"Tests failed: 10, passed: 25\"\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  ]\r\n};","import teamCityBuildsResponse from './team-city-builds-response';\r\n\r\nexport class TeamCityHttpClientStub {\r\n  fetch() {\r\n    return Promise.resolve({json: ()=>teamCityBuildsResponse});\r\n  }\r\n};\r\n",null],"sourceRoot":"..\\src"}